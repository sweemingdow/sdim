// Code generated by rpcgen. DO NOT EDIT.

package rpcmsg

import (
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient/rcfactory"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rpccall"
	"time"
)

type msgProvider struct {
	clientFactory rcfactory.ArpcClientFactory
}

func NewMsgProvider(clientFactory rcfactory.ArpcClientFactory) MsgProvider {
	return &msgProvider{
		clientFactory: clientFactory,
	}
}

func (p *msgProvider) BatchConvRecentlyMsgs(req BatchConvRecentlyMsgsReq) (rpccall.RpcRespWrapper[BatchConvRecentlyMsgsResp], error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespWrapper[BatchConvRecentlyMsgsResp]
	var reqForCall interface{}

	reqForCall = &req

	if err := cp.Call("/batch_conv_recently_msgs", reqForCall, &resp, 3*time.Second); err != nil {
		return resp, err
	}
	return resp, nil
}

func (p *msgProvider) acquireClientProxy() rclient.ArpcClientProxy {
	return p.clientFactory.AcquireClient("msg_server")
}
