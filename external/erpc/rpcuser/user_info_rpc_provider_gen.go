// Code generated by rpcgen. DO NOT EDIT.

package rpcuser

import (
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rclient/rcfactory"
	"github.com/sweemingdow/gmicro_pkg/pkg/server/srpc/rpccall"
	"github.com/sweemingdow/sdim/external/emodel/usermodel"
	"time"
)

type userInfoRpcProvider struct {
	clientFactory rcfactory.ArpcClientFactory
}

func NewUserInfoRpcProvider(clientFactory rcfactory.ArpcClientFactory) UserInfoRpcProvider {
	return &userInfoRpcProvider{
		clientFactory: clientFactory,
	}
}


func (p *userInfoRpcProvider) UserState(req rpccall.RpcReqWrapper[UserStateReq]) (rpccall.RpcRespWrapper[usermodel.UserState], error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespWrapper[usermodel.UserState]
	var reqForCall interface{}
	
	reqForCall = &req
	
	if err := cp.Call("/user_state", reqForCall, &resp, 500 * time.Millisecond); err != nil {
		return resp, err
	}
	return resp, nil
}

func (p *userInfoRpcProvider) UsersUnitInfo(req rpccall.RpcReqWrapper[UsersUnitInfoReq]) (rpccall.RpcRespWrapper[map[string]*UnitInfoRespItem], error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespWrapper[map[string]*UnitInfoRespItem]
	var reqForCall interface{}
	
	reqForCall = &req
	
	if err := cp.Call("/users_unit_info", reqForCall, &resp, 800 * time.Millisecond); err != nil {
		return resp, err
	}
	return resp, nil
}

func (p *userInfoRpcProvider) UserUnitInfo(req rpccall.RpcReqWrapper[UserUnitInfoReq]) (rpccall.RpcRespWrapper[*UnitInfoRespItem], error) {
	cp := p.acquireClientProxy()
	var resp rpccall.RpcRespWrapper[*UnitInfoRespItem]
	var reqForCall interface{}
	
	reqForCall = &req
	
	if err := cp.Call("/user_unit_info", reqForCall, &resp, 500 * time.Millisecond); err != nil {
		return resp, err
	}
	return resp, nil
}


func (p *userInfoRpcProvider) acquireClientProxy() rclient.ArpcClientProxy {
	return p.clientFactory.AcquireClient("user_server")
}
